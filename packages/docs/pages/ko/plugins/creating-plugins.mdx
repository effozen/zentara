# 플러그인 만들기

Zentara를 위한 자신만의 플러그인을 만드는 방법을 알아봅니다.

## 기본 구조

모든 플러그인은 `createPluginFactory` 함수를 사용하여 생성됩니다:

```typescript
import { createPluginFactory } from '@zentara/core';

interface MyPluginState {
  count: number;
}

const myPlugin = createPluginFactory<MyPluginState>()({
  initialState: {
    count: 0,
  },
  createPlugin: (stateManager) => ({
    name: 'my-plugin',
    // 플러그인 메서드들
  }),
});
```

## 플러그인 생명주기

### 초기화

`init` 메서드는 플러그인이 마운트될 때 호출됩니다:

```typescript
init: (context) => {
  console.log('플러그인 초기화됨');

  // 정리 함수 반환 (선택사항)
  return () => {
    console.log('init에서의 정리 작업');
  };
};
```

### 제거

`destroy` 메서드는 플러그인이 언마운트될 때 호출됩니다:

```typescript
destroy: () => {
  console.log('플러그인 제거됨');
};
```

## 입력 처리

### 값 변경

`onValueChange` 메서드는 입력 값이 변경될 때마다 호출됩니다:

```typescript
onValueChange: (value, context) => {
  // 값 수정
  return value.toUpperCase();
};
```

### 키 이벤트

`onKeyDown` 메서드는 키보드 이벤트를 처리합니다:

```typescript
onKeyDown: (event, context) => {
  if (event.key === 'Tab') {
    event.preventDefault();
    // 탭 키 처리
  }
};
```

## 커스텀 UI

### 오버레이 렌더링

`renderOverlay` 메서드를 사용하면 입력 필드 위에 UI 요소를 렌더링할 수 있습니다:

```tsx
renderOverlay: (context) => {
  return <div className='my-overlay'>카운트: {context.shared.count}</div>;
};
```

### 커스텀 입력 필드 렌더링

`renderInput` 메서드를 사용하면 입력 필드를 완전히 커스터마이징할 수 있습니다:

```tsx
renderInput: (props) => {
  return (
    <div className='custom-input-wrapper'>
      <input {...props} />
      <button onClick={() => props.setValue('')}>지우기</button>
    </div>
  );
};
```
